<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>统计力学笔记</title>
    <link href="/2023/12/%E7%BB%9F%E8%AE%A1%E5%8A%9B%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
    <url>/2023/12/%E7%BB%9F%E8%AE%A1%E5%8A%9B%E5%AD%A6%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="./note-for-statistical-mechanics.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
    <categories>
      
      <category>物理</category>
      
      <category>统计力学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>物理</tag>
      
      <tag>统计力学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>西北工业大学电子实习单片机程序设计-流水灯&amp;电子表</title>
    <link href="/2023/04/%E8%A5%BF%E5%8C%97%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E7%94%B5%E5%AD%90%E5%AE%9E%E4%B9%A0%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    <url>/2023/04/%E8%A5%BF%E5%8C%97%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E7%94%B5%E5%AD%90%E5%AE%9E%E4%B9%A0%E5%8D%95%E7%89%87%E6%9C%BA%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<p>在本文中，你将看到：<br>西北工业大学电子实习单片机程序设计课程的流水灯和电子表实验参考代码</p><span id="more"></span><p>电子实习是一门32总学时的实习课程，其中包含了焊接、电子测量、单片机程序设计和物联网等内容，单片机程序设计作为一个8学时的部分，其中前四个课时是流水灯实验，后四个课时是电子表&#x2F;交通灯实验，我没有完成交通灯的代码，而是做了电子表的闹钟功能，这里将会提供我的参考代码<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="代码仅供参考，不保证正确性，如有错误请指出，同时我没有添加注释，请耐心阅读代码学习。">[1]</span></a></sup>。</p><h1 id="流水灯"><a href="#流水灯" class="headerlink" title="流水灯"></a>流水灯</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stc8a.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;intrins.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> uchar unsigned char</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> uint unsigned int</span><br><br>sbit k1 = P3 ^ <span class="hljs-number">2</span>;<br>sbit k2 = P3 ^ <span class="hljs-number">3</span>;<br>sbit k3 = P3 ^ <span class="hljs-number">4</span>;<br>sbit k4 = P3 ^ <span class="hljs-number">5</span>;<br>sbit k5 = P4 ^ <span class="hljs-number">0</span>;<br>sbit LED = P4 ^ <span class="hljs-number">1</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">delay_us</span><span class="hljs-params">(uint us)</span><br>&#123;<br>    uint a;<br>    uchar b;<br>    <span class="hljs-keyword">for</span> (b = <span class="hljs-number">0</span>; b &lt; <span class="hljs-number">2</span>; b++)<br>        <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; us; a++)<br>            ;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_1</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b;<br>    b = <span class="hljs-number">0x7f</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">7</span>; a++)<br>    &#123;<br><br>        P0 = b;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _cror_(b, <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">7</span>; a++)<br>    &#123;<br>        P0 = b;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _crol_(b, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_2</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b;<br>    b = <span class="hljs-number">0x7f</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">7</span>; a++)<br>    &#123;<br>        P0 = <span class="hljs-number">0xe7</span> &amp; b;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _cror_(b, <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">7</span>; a++)<br>    &#123;<br>        P0 = <span class="hljs-number">0xe7</span> &amp; b;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _crol_(b, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_3</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b, c;<br>    b = <span class="hljs-number">0xfe</span>;<br>    c = <span class="hljs-number">0x7f</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">7</span>; a++)<br>    &#123;<br>        P0 = b &amp; c;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _crol_(b, <span class="hljs-number">1</span>);<br>        c = _cror_(c, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_4</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b;<br>    b = <span class="hljs-number">0x7f</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">9</span>; a++)<br>    &#123;<br>        P0 = b;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _cror_(b, <span class="hljs-number">1</span>) &amp; b;<br>    &#125;<br>    b = <span class="hljs-number">0x01</span>;<br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">8</span>; a++)<br>    &#123;<br>        P0 = b;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        b = _crol_(b, <span class="hljs-number">1</span>) | b;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_5</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b, c, d;<br>    b = <span class="hljs-number">0x7f</span>;<br>    c = <span class="hljs-number">0xff</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">9</span>; a++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (d = <span class="hljs-number">0</span>; d &lt; <span class="hljs-number">7</span>; d++)<br>        &#123;<br>            P0 = b &amp; c;<br>            delay_us(<span class="hljs-number">50000</span>);<br>            b = _cror_(b, <span class="hljs-number">1</span>);<br>        &#125;<br>        c = c &lt;&lt; <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_6</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b, c, i;<br>    c = <span class="hljs-number">0x7f</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; <span class="hljs-number">8</span>; a++)<br>    &#123;<br>        b = <span class="hljs-number">0x7f</span>;<br>        P0 = c;<br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; a; i++)<br>        &#123;<br>            P0 = b &amp; c;<br>            delay_us(<span class="hljs-number">50000</span>);<br>            b = _cror_(b, <span class="hljs-number">1</span>);<br>        &#125;<br>        delay_us(<span class="hljs-number">50000</span>);<br>        c = _cror_(c, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_7</span><span class="hljs-params">()</span><br>&#123;<br>    uint a, b = <span class="hljs-number">1000</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">1</span>; a &lt; <span class="hljs-number">1000</span>; a++)<br>    &#123;<br>        P0 = <span class="hljs-number">0xff</span>;<br>        delay_us(b--);<br>        P0 = <span class="hljs-number">0x00</span>;<br>        delay_us(a);<br>    &#125;<br>    b = <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">1</span>; a &lt; <span class="hljs-number">1000</span>; a++)<br>    &#123;<br>        P0 = <span class="hljs-number">0x00</span>;<br>        delay_us(b--);<br>        P0 = <span class="hljs-number">0xff</span>;<br>        delay_us(a);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">start_8</span><span class="hljs-params">()</span><br>&#123;<br>    uchar a, b, c, d, e, f, i;<br>    c = <span class="hljs-number">0x7f</span>;<br>    d = <span class="hljs-number">0x7f</span>;<br><br>    e = <span class="hljs-number">0xfe</span>;<br>    f = <span class="hljs-number">0xfe</span>;<br><br>    <span class="hljs-keyword">for</span> (a = <span class="hljs-number">1</span>; a &lt; <span class="hljs-number">5</span>; a++)<br>    &#123;<br>        P0 = c &amp; e;<br><br>        b = d;<br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; (<span class="hljs-number">8</span> - a); i++)<br>        &#123;<br>            P0 = b &amp; c &amp; e;<br>            delay_us(<span class="hljs-number">50000</span>);<br>            b = _cror_(b, <span class="hljs-number">1</span>);<br>        &#125;<br><br>        e = e &lt;&lt; <span class="hljs-number">1</span>;<br>        f = _crol_(f, <span class="hljs-number">1</span>);<br>        P0 = c &amp; e;<br><br>        b = f;<br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; (<span class="hljs-number">7</span> - a); i++)<br>        &#123;<br>            P0 = b &amp; c &amp; e;<br>            delay_us(<span class="hljs-number">50000</span>);<br>            b = _crol_(b, <span class="hljs-number">1</span>);<br>        &#125;<br><br>        c = c &gt;&gt; <span class="hljs-number">1</span>;<br>        d = _cror_(d, <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    LED = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (!k1)<br>    &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-comment">// start_1();</span><br>            <span class="hljs-comment">// start_2();</span><br>            start_3();<br>            start_4();<br>            start_5();<br>            start_6();<br>            start_7();<br>            start_8();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (!k2)<br>    &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>        &#123;<br>            start_8();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="电子表"><a href="#电子表" class="headerlink" title="电子表"></a>电子表</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;STC8A.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> uchar unsigned char</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> uint unsigned int</span><br><br>uchar table[] = &#123;<span class="hljs-number">0xc0</span>, <span class="hljs-number">0xf9</span>, <span class="hljs-number">0xa4</span>, <span class="hljs-number">0xb0</span>, <span class="hljs-number">0x99</span>, <span class="hljs-number">0x92</span>, <span class="hljs-number">0x82</span>, <span class="hljs-number">0xf8</span>, <span class="hljs-number">0x80</span>, <span class="hljs-number">0x90</span>, <span class="hljs-number">0xbf</span>&#125;;<br>uchar select[] = &#123;<span class="hljs-number">0xfe</span>, <span class="hljs-number">0xfd</span>, <span class="hljs-number">0xfb</span>, <span class="hljs-number">0xf7</span>, <span class="hljs-number">0xef</span>, <span class="hljs-number">0xdf</span>, <span class="hljs-number">0xbf</span>, <span class="hljs-number">0x7f</span>&#125;;<br><br>sbit k1 = P3 ^ <span class="hljs-number">2</span>;<br>sbit k2 = P3 ^ <span class="hljs-number">3</span>;<br>sbit k3 = P3 ^ <span class="hljs-number">4</span>;<br>sbit k4 = P3 ^ <span class="hljs-number">5</span>;<br>sbit k5 = P4 ^ <span class="hljs-number">0</span>;<br>sbit beep = P4 ^ <span class="hljs-number">2</span>;<br><br>bit flag1, flag2, flag3, flag4, flag6, flag7;<br><span class="hljs-type">char</span> flag5;<br><br><span class="hljs-type">char</span> hour, minute, second, year, month, day, alarm_hour, alarm_minute;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">delay</span><span class="hljs-params">()</span><br>&#123;<br>    uint i = <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">while</span> (i--)<br>        ;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">delay_us</span><span class="hljs-params">(uint us)</span><br>&#123;<br>    uint a;<br>    uchar b;<br>    <span class="hljs-keyword">for</span> (b = <span class="hljs-number">0</span>; b &lt; <span class="hljs-number">2</span>; b++)<br>        <span class="hljs-keyword">for</span> (a = <span class="hljs-number">0</span>; a &lt; us; a++)<br>            ;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">BEEP</span><span class="hljs-params">(uint us)</span><br>&#123;<br>    beep = ~beep;<br>    delay_us(us);<br>    beep = ~beep;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span><br>&#123;<br>    P0M1 = <span class="hljs-number">0x00</span>;<br>    P0M0 = <span class="hljs-number">0xff</span>;<br>    P1M1 = <span class="hljs-number">0x00</span>;<br>    P1M0 = <span class="hljs-number">0xff</span>;<br>    P2M1 = <span class="hljs-number">0x00</span>;<br>    P2M0 = <span class="hljs-number">0xff</span>;<br><br>    AUXR &amp;= <span class="hljs-number">0x7F</span>;<br>    TMOD &amp;= <span class="hljs-number">0xF0</span>;<br>    TL0 = <span class="hljs-number">0xC0</span>;<br>    TH0 = <span class="hljs-number">0x63</span>;<br>    TR0 = <span class="hljs-number">1</span>;<br>    ET0 = <span class="hljs-number">1</span>;<br>    EA = <span class="hljs-number">1</span>;<br><br>    flag5 = <span class="hljs-number">0</span>;<br><br>    hour = <span class="hljs-number">0</span>;<br>    minute = <span class="hljs-number">0</span>;<br>    second = <span class="hljs-number">0</span>;<br>    year = <span class="hljs-number">23</span>;<br>    month = <span class="hljs-number">4</span>;<br>    day = <span class="hljs-number">21</span>;<br><br>    alarm_hour = <span class="hljs-number">12</span>;<br>    alarm_minute = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// 时间显示</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">display_time</span><span class="hljs-params">()</span><br>&#123;<br>    P1 = select[<span class="hljs-number">0</span>];<br>    P0 = table[second % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">1</span>];<br>    P0 = table[second / <span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">2</span>];<br>    P0 = table[<span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">3</span>];<br>    P0 = table[minute % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">4</span>];<br>    P0 = table[minute / <span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">5</span>];<br>    P0 = table[<span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">6</span>];<br>    P0 = table[hour % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">7</span>];<br>    P0 = table[hour / <span class="hljs-number">10</span>];<br>    delay();<br>&#125;<br><br><span class="hljs-comment">// 时间设置</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">set_time</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (k1 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag1 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag1 = <span class="hljs-number">1</span>;<br>            hour++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k1 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag1 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k2 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag2 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag2 = <span class="hljs-number">1</span>;<br>            hour--;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k2 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag2 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k3 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag3 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag3 = <span class="hljs-number">1</span>;<br>            minute++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k3 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag3 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k4 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag4 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag4 = <span class="hljs-number">1</span>;<br>            minute--;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k4 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag4 = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 日期显示</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">display_date</span><span class="hljs-params">()</span><br>&#123;<br>    P1 = select[<span class="hljs-number">0</span>];<br>    P0 = table[day % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">1</span>];<br>    P0 = table[day / <span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">2</span>];<br>    P0 = table[<span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">3</span>];<br>    P0 = table[month % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">4</span>];<br>    P0 = table[month / <span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">5</span>];<br>    P0 = table[<span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">6</span>];<br>    P0 = table[year % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">7</span>];<br>    P0 = table[year / <span class="hljs-number">10</span>];<br>    delay();<br>&#125;<br><br><span class="hljs-comment">// 日期设置</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">set_date</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (k1 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag1 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag1 = <span class="hljs-number">1</span>;<br>            month++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k1 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag1 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k2 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag2 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag2 = <span class="hljs-number">1</span>;<br>            month--;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k2 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag2 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k3 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag3 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag3 = <span class="hljs-number">1</span>;<br>            day++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k3 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag3 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k4 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag4 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag4 = <span class="hljs-number">1</span>;<br>            day--;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k4 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag4 = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 闹钟显示</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">display_alarm</span><span class="hljs-params">()</span><br>&#123;<br>    P1 = select[<span class="hljs-number">0</span>];<br>    P0 = <span class="hljs-number">0x88</span>;<br>    delay();<br>    P1 = select[<span class="hljs-number">1</span>];<br>    P0 = <span class="hljs-number">0xc7</span>;<br>    delay();<br>    P1 = select[<span class="hljs-number">2</span>];<br>    P0 = <span class="hljs-number">0x88</span>;<br>    delay();<br><br>    P1 = select[<span class="hljs-number">3</span>];<br>    P0 = table[alarm_minute % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">4</span>];<br>    P0 = table[alarm_minute / <span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">5</span>];<br>    P0 = table[<span class="hljs-number">10</span>];<br>    delay();<br><br>    P1 = select[<span class="hljs-number">6</span>];<br>    P0 = table[alarm_hour % <span class="hljs-number">10</span>];<br>    delay();<br>    P1 = select[<span class="hljs-number">7</span>];<br>    P0 = table[alarm_hour / <span class="hljs-number">10</span>];<br>    delay();<br>&#125;<br><br><span class="hljs-comment">// 闹钟设置</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">set_alarm</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (k1 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag1 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag1 = <span class="hljs-number">1</span>;<br>            alarm_hour++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k1 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag1 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k2 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag2 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag2 = <span class="hljs-number">1</span>;<br>            alarm_hour--;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k2 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag2 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k3 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag3 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag3 = <span class="hljs-number">1</span>;<br>            alarm_minute++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k3 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag3 = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k4 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag4 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag4 = <span class="hljs-number">1</span>;<br>            alarm_minute--;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (k4 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag4 = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 闹钟报时功能</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">alarm</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (alarm_hour == hour)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (alarm_minute == minute)<br>        &#123;<br>            BEEP(<span class="hljs-number">50000</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 功能切换实现</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">function</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (k5 == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag6 == <span class="hljs-number">0</span>)<br>        &#123;<br>            flag6 = <span class="hljs-number">1</span>;<br>            BEEP(<span class="hljs-number">50000</span>);<br>            <span class="hljs-keyword">switch</span> (flag5)<br>            &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>                flag5 = <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>                flag5 = <span class="hljs-number">2</span>;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>                flag5 = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (k5 == <span class="hljs-number">1</span>)<br>    &#123;<br>        flag6 = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    init();<br>    P2 = <span class="hljs-number">0x00</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (flag5 == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-comment">// 时间显示</span><br>            display_time();<br>            set_time();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (flag5 == <span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-comment">// 日期显示</span><br>            display_date();<br>            set_date();<br>        &#125;<br>        <span class="hljs-keyword">if</span> (flag5 == <span class="hljs-number">2</span>)<br>        &#123;<br>            <span class="hljs-comment">// 闹钟显示</span><br>            display_alarm();<br>            set_alarm();<br>        &#125;<br><br>        function();<br>        alarm();<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">timer0</span><span class="hljs-params">()</span> interrupt 1<br>&#123;<br>    uchar t0;<br><br>    t0++;<br><br>    <span class="hljs-keyword">if</span> (t0 == <span class="hljs-number">50</span>)<br>    &#123;<br>        t0 = <span class="hljs-number">0</span>;<br>        second++;<br>        <span class="hljs-keyword">if</span> (second &gt;= <span class="hljs-number">60</span>)<br>        &#123;<br>            second = <span class="hljs-number">0</span>;<br>            minute++;<br>            <span class="hljs-keyword">if</span> (minute &gt;= <span class="hljs-number">60</span>)<br>            &#123;<br>                minute = <span class="hljs-number">0</span>;<br>                hour++;<br>                <span class="hljs-keyword">if</span> (hour &gt;= <span class="hljs-number">24</span>)<br>                &#123;<br>                    hour = <span class="hljs-number">0</span>;<br>                    day++;<br>                    <span class="hljs-keyword">if</span> (day &gt;= <span class="hljs-number">30</span>)<br>                    &#123;<br>                        day = <span class="hljs-number">1</span>;<br>                        month++;<br>                        <span class="hljs-keyword">if</span> (month &gt; <span class="hljs-number">12</span>)<br>                        &#123;<br>                            month = <span class="hljs-number">1</span>;<br>                            year++;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (hour &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        hour = <span class="hljs-number">23</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (hour &gt;= <span class="hljs-number">24</span>)<br>    &#123;<br>        hour = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (minute &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        minute = <span class="hljs-number">59</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (minute &gt;= <span class="hljs-number">60</span>)<br>    &#123;<br>        minute = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (second &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        second = <span class="hljs-number">59</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (second &gt;= <span class="hljs-number">60</span>)<br>    &#123;<br>        second = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (month &lt;= <span class="hljs-number">0</span>)<br>    &#123;<br>        month = <span class="hljs-number">12</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (month &gt;= <span class="hljs-number">13</span>)<br>    &#123;<br>        month = <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (day &lt;= <span class="hljs-number">0</span>)<br>    &#123;<br>        day = <span class="hljs-number">31</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (day &gt; <span class="hljs-number">31</span>)<br>    &#123;<br>        day = <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (alarm_hour &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        alarm_hour = <span class="hljs-number">23</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (alarm_hour &gt;= <span class="hljs-number">24</span>)<br>    &#123;<br>        alarm_hour = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (alarm_minute &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        alarm_minute = <span class="hljs-number">59</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (alarm_minute &gt;= <span class="hljs-number">60</span>)<br>    &#123;<br>        alarm_minute = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h1 id="物联网"><a href="#物联网" class="headerlink" title="物联网"></a>物联网</h1><p>补上当时没有加进去的物联网（控制舵机+红绿灯）部分</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/*单片机晶振频率选用11.0592MHZ*/</span><br><span class="hljs-comment">#include &quot;stc15.h&quot;          //调用stc15w单片机头文件</span><br><span class="hljs-comment">#include &quot;intrins.h&quot;        //</span><br><span class="hljs-comment">#define uchar unsigned char //</span><br><span class="hljs-comment">#define uint  unsigned int  //</span><br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>IO名称定义<br>sbit PWM1  = P2 ^ <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 舵机<span class="hljs-number">1</span>输出定义<br>sbit IR_IN = P5 ^ <span class="hljs-number">5</span>; <span class="hljs-regexp">//</span> 红外传感器输入定义  检测到物体输出低电平<br>sbit RR    = P7 ^ <span class="hljs-number">3</span>; <span class="hljs-regexp">//</span> 交通灯红灯定义      低电平点亮<br>sbit YY    = P7 ^ <span class="hljs-number">2</span>; <span class="hljs-regexp">//</span> 交通灯黄灯定义      低电平点亮<br>sbit GG    = P7 ^ <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 交通灯绿灯定义      低电平点亮<br>sbit beep  = P4 ^ <span class="hljs-number">0</span>; <span class="hljs-regexp">//</span> 蜂鸣器定义          有源蜂鸣等于低电平发声<br><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span><span class="hljs-regexp">//</span>变量定义<br>uint Servo1PwmDat = <span class="hljs-number">750</span>; <span class="hljs-regexp">//</span> 启动单片机时舵机落杆位置，落杆 = <span class="hljs-number">750</span>,（<span class="hljs-number">500</span>-<span class="hljs-number">2500</span>）对应角度<span class="hljs-number">0</span>-<span class="hljs-number">180</span>度<br><br><span class="hljs-regexp">//</span> 延时子程<br>void DelayMs(uint ms)<br>&#123;<br>    uint i, j;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">85</span>; i++)<br>        <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; ms; j++)<br>            ;<br>&#125;<br><br><span class="hljs-regexp">//</span> IO口、定时器、串口通讯波特率初始化<br>void init()<br>&#123;<br>    <span class="hljs-regexp">//</span> IO初始化<br>    P0M1 = <span class="hljs-number">0</span>x00;<br>    P0M0 = <span class="hljs-number">0</span>x00; <span class="hljs-regexp">//</span> 设置为准双向口<br>    P1M1 = <span class="hljs-number">0</span>x00;<br>    P1M0 = <span class="hljs-number">0</span>x00; <span class="hljs-regexp">//</span> 设置为准双向口<br>    P2M1 = <span class="hljs-number">0</span>x00;<br>    P2M0 = <span class="hljs-number">0</span>x00; <span class="hljs-regexp">//</span> 设置为准双向口<br>    P3M1 = <span class="hljs-number">0</span>x00;<br>    P3M0 = <span class="hljs-number">0</span>x00; <span class="hljs-regexp">//</span> 设置为准双向口<br>    P4M1 = <span class="hljs-number">0</span>x00;<br>    P4M0 = <span class="hljs-number">0</span>x00; <span class="hljs-regexp">//</span> 设置为准双向口<br>    P5M1 = <span class="hljs-number">0</span>x00;<br>    P5M0 = <span class="hljs-number">0</span>x00; <span class="hljs-regexp">//</span> 设置为准双向口<br><br>    <span class="hljs-regexp">//</span> 舵机使用定时器T0初始<br>    TMOD &amp;= <span class="hljs-number">0</span>xF0; <span class="hljs-regexp">//</span> 设置定时器模式<br>    TMOD |= <span class="hljs-number">0</span>x01; <span class="hljs-regexp">//</span> 设置定时器模式<br>    TL0 = <span class="hljs-number">0</span>x00;   <span class="hljs-regexp">//</span> 设置定时初值<br>    TH0 = <span class="hljs-number">0</span>x00;   <span class="hljs-regexp">//</span> 设置定时初值<br>    TF0 = <span class="hljs-number">0</span>;      <span class="hljs-regexp">//</span> 清除TF0标志<br>    TR0 = <span class="hljs-number">1</span>;      <span class="hljs-regexp">//</span> 定时器<span class="hljs-number">0</span>开始计时<br>    ET0 = <span class="hljs-number">1</span>;      <span class="hljs-regexp">//</span> 开定时器<span class="hljs-number">0</span>中断<br><br>    <span class="hljs-regexp">//</span> 定时器T1   <span class="hljs-number">10</span>毫秒@<span class="hljs-number">11.0592</span>MHz<br>    AUXR &amp;= <span class="hljs-number">0</span>x7F; <span class="hljs-regexp">//</span> 定时器时钟<span class="hljs-number">12</span>T模式<br>    TMOD &amp;= <span class="hljs-number">0</span>xF0; <span class="hljs-regexp">//</span> 设置定时器模式<br>    TL1 = <span class="hljs-number">0</span>x00;   <span class="hljs-regexp">//</span> 设置定时初始值<br>    TH1 = <span class="hljs-number">0</span>xDC;   <span class="hljs-regexp">//</span> 设置定时初始值<br>    ET1 = <span class="hljs-number">1</span>;      <span class="hljs-regexp">//</span> 允许定时器T1产生中断<br>    TR1 = <span class="hljs-number">1</span>;      <span class="hljs-regexp">//</span> 定时器<span class="hljs-number">1</span>开始计时<br><br>    <span class="hljs-regexp">//</span> 定时器T2 串口通讯设置波特率<span class="hljs-number">9600</span>bps@<span class="hljs-number">11.0592</span>MHz<br>    <span class="hljs-regexp">/* SCON = 0x50;                       /</span>/<span class="hljs-number">8</span>位数据,可变波特率<br>     AUXR |= <span class="hljs-number">0</span>x01;                     <span class="hljs-regexp">//</span>串口<span class="hljs-number">1</span>选择定时器<span class="hljs-number">2</span>为波特率发生器<br>     AUXR &amp;= <span class="hljs-number">0</span>xFB;                     <span class="hljs-regexp">//</span>定时器时钟<span class="hljs-number">12</span>T模式<br>     T2L = <span class="hljs-number">0</span>xE8;                       <span class="hljs-regexp">//</span>设置定时初始值<br>     T2H = <span class="hljs-number">0</span>xFF;                    <span class="hljs-regexp">//</span>设置定时初始值<br>     AUXR |= <span class="hljs-number">0</span>x10;                     <span class="hljs-regexp">//</span>定时器<span class="hljs-number">2</span>开始计时*/<br>&#125;<br><br><span class="hljs-regexp">//</span> 红绿灯一次循环<br>void TrafficLight()<br>&#123;<br>    int a = <span class="hljs-number">5</span>;<br><br>    GG = <span class="hljs-number">0</span>;<br>    YY = <span class="hljs-number">1</span>;<br>    RR = <span class="hljs-number">1</span>;<br><br>    GG = <span class="hljs-number">0</span>; <span class="hljs-regexp">//</span> 绿灯亮<br>    DelayMs(<span class="hljs-number">50000</span>);<br>    GG = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 绿灯灭<br><br>    <span class="hljs-regexp">//</span> 黄灯闪烁<span class="hljs-number">5</span>次<br>    <span class="hljs-keyword">while</span> (a-- &gt; <span class="hljs-number">0</span>) &#123;<br>        YY   = <span class="hljs-number">0</span>; <span class="hljs-regexp">//</span> 黄灯亮<br>        beep = <span class="hljs-number">0</span>;<br>        DelayMs(<span class="hljs-number">10000</span>);<br>        beep = <span class="hljs-number">1</span>;<br>        YY   = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 黄灯灭<br>        DelayMs(<span class="hljs-number">10000</span>);<br>    &#125;<br><br>    RR = <span class="hljs-number">0</span>; <span class="hljs-regexp">//</span> 红灯亮<br>    DelayMs(<span class="hljs-number">30000</span>);<br>    RR = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 红灯灭<br><br>    <span class="hljs-regexp">//</span> 黄灯闪烁<span class="hljs-number">5</span>次<br>    <span class="hljs-keyword">while</span> (a-- &gt; <span class="hljs-number">0</span>) &#123;<br>        YY   = <span class="hljs-number">0</span>; <span class="hljs-regexp">//</span> 黄灯亮<br>        beep = <span class="hljs-number">0</span>;<br>        DelayMs(<span class="hljs-number">10000</span>);<br>        beep = <span class="hljs-number">1</span>;<br>        YY   = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 黄灯灭<br>        DelayMs(<span class="hljs-number">10000</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-regexp">//</span> 舵机使用定时器<span class="hljs-number">0</span>计数器赋值产生定时中断<br>void Timer0(uint pwm) <span class="hljs-regexp">//</span> <span class="hljs-number">11.0592</span>Mhz晶振，<span class="hljs-number">12</span>分频，所以计数器每递增一个数就是接近<span class="hljs-number">1</span>微秒，<br>&#123;<br>    uint value;<br>    value = <span class="hljs-number">65535</span> - pwm;<br>    TR0   = <span class="hljs-number">0</span>;          <span class="hljs-regexp">//</span> 关闭定时器T0<br>    TL0   = value;      <span class="hljs-regexp">//</span> <span class="hljs-number">16</span>位数据给<span class="hljs-number">8</span>位数据赋值默认将<span class="hljs-number">16</span>位数据的低八位直接赋给八位数据<br>    TH0   = value &gt;&gt; <span class="hljs-number">8</span>; <span class="hljs-regexp">//</span> 将<span class="hljs-number">16</span>位数据右移<span class="hljs-number">8</span>位，也就是将高<span class="hljs-number">8</span>位移到低八位，再赋值给<span class="hljs-number">8</span>位数据<br>    TR0   = <span class="hljs-number">1</span>;          <span class="hljs-regexp">//</span> 启动定时器T0<br>&#125;<br><br><span class="hljs-regexp">//</span> 主程序<br>void main()<br>&#123;<br>    ES = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 开串口中断<br>    EA = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 打开总中断<br>    init(); <span class="hljs-regexp">//</span> 调用初始化程序<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-regexp">//</span> TrafficLight(); <span class="hljs-regexp">//</span> 调用一次红绿灯循环<br><br>        <span class="hljs-regexp">//</span> 当红外传感器检测到有物体时，舵机转动到指定角度<br>        <span class="hljs-keyword">if</span> (IR_IN == <span class="hljs-number">0</span>) &#123;<br>            Servo1PwmDat = <span class="hljs-number">1500</span>; <span class="hljs-regexp">//</span> 舵机转动到指定角度<br>            DelayMs(<span class="hljs-number">50000</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            Servo1PwmDat = <span class="hljs-number">750</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-regexp">//</span> 定时器T0中断处理<br>void Timer0_isr() interrupt <span class="hljs-number">1</span><br>&#123;<br>    static uint c = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> 静态变量：每次调用函数时保持上一次所赋的值<br>    switch (c) &#123;<br>        case <span class="hljs-number">1</span>:<br>            PWM1 = <span class="hljs-number">1</span>; <span class="hljs-regexp">//</span> PWM1控制舵机脚高电平输出<br>            Timer0(Servo1PwmDat);<br>            <span class="hljs-keyword">break</span>; <span class="hljs-regexp">//</span> 给定时器<span class="hljs-number">0</span>赋值，计数Pwm1Dat个脉冲后产生中断，下次中断会进入下一个case语句<br><br>        case <span class="hljs-number">2</span>:<br>            PWM1 = <span class="hljs-number">0</span>; <span class="hljs-regexp">//</span> PWM控制舵机脚低电平<br>            Timer0(<span class="hljs-number">20000</span> - Servo1PwmDat);<br>            c = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">break</span>;<br>            <span class="hljs-regexp">//</span> 高脉冲结束后剩下的时间(<span class="hljs-number">20000</span>-Pwm1Dat)全是低电平了，Pwm1Dat + (<span class="hljs-number">20000</span>-Pwm1Dat) = <span class="hljs-number">20000</span>个脉冲正好为一个周期<span class="hljs-number">20</span>毫秒<br>    &#125;<br>    c++;<br>&#125;<br><br><span class="hljs-regexp">//</span> 定时器T1中断处理，每<span class="hljs-number">10</span>ms进入一次<br>void Timer1_isr() interrupt <span class="hljs-number">3</span><br>&#123;<br>&#125;<br></code></pre></td></tr></table></figure><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>代码仅供参考，不保证正确性，如有错误请指出，同时我没有添加注释，请耐心阅读代码学习。<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>单片机</category>
      
      <category>51单片机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>单片机</tag>
      
      <tag>51单片机</tag>
      
      <tag>电子实习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Powershell启动时检测系统代理情况并自动添加环境变量</title>
    <link href="/2022/10/Powershell%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86%E6%83%85%E5%86%B5%E5%B9%B6%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <url>/2022/10/Powershell%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F%E4%BB%A3%E7%90%86%E6%83%85%E5%86%B5%E5%B9%B6%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<p>在本文中，你将看到：<br>如何让Powershell启动时自动检测系统代理是否打开并自动添加环境变量</p><span id="more"></span><p>Windows在设置里启用系统代理后，终端并不会自动添加环境变量，导致无法使用代理，每次都需要手动添加环境变量，不够优雅，所以我尝试写了一个脚本自动检测和获取系统代理并写入环境变量。</p><p>通过读取Windows注册表我们可以得知当前系统代理是否打开，同时也能获取代理地址和端口</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell">&gt;<span class="hljs-variable">$internet_setting</span> = <span class="hljs-built_in">Get-ItemProperty</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">&#x27;HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet Settings&#x27;</span><br>&gt;<span class="hljs-variable">$internet_setting</span>.ProxyEnable<br><span class="hljs-number">1</span> <span class="hljs-comment"># 0、1分别代表系统代理关闭和打开</span><br>&gt;<span class="hljs-variable">$internet_setting</span>.ProxyServer<br><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:xxxx <span class="hljs-comment"># xxxx为代理端口</span><br></code></pre></td></tr></table></figure><p>然后我们就可以通过<code>$env:HTTP_PROXY</code>和<code>$env:HTTPS_PROXY</code>来设置环境变量，这样就可以使用代理了</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">&gt;<span class="hljs-variable">$env:HTTP_PROXY</span> = <span class="hljs-string">&quot;http://<span class="hljs-variable">$</span>(<span class="hljs-variable">$internet_setting</span>.ProxyServer)&quot;</span><br>&gt;<span class="hljs-variable">$env:HTTPS_PROXY</span> = <span class="hljs-string">&quot;http://<span class="hljs-variable">$</span>(<span class="hljs-variable">$internet_setting</span>.ProxyServer)&quot;</span><br></code></pre></td></tr></table></figure><p>将上述内容写入<code>$PROFILE</code>文件中后，每次启动Powershell时都会自动检测系统代理并添加环境变量</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs powershell">&gt;notepad <span class="hljs-variable">$PROFILE</span><br><span class="hljs-comment"># 添加以下内容</span><br><span class="hljs-variable">$internet_setting</span> = <span class="hljs-built_in">Get-ItemProperty</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">&#x27;HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet Settings&#x27;</span><br><span class="hljs-keyword">if</span> (<span class="hljs-variable">$internet_setting</span>.ProxyEnable <span class="hljs-operator">-eq</span> <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-variable">$env:HTTP_PROXY</span> = <span class="hljs-string">&quot;http://<span class="hljs-variable">$</span>(<span class="hljs-variable">$internet_setting</span>.ProxyServer)&quot;</span><br>    <span class="hljs-variable">$env:HTTPS_PROXY</span> = <span class="hljs-string">&quot;http://<span class="hljs-variable">$</span>(<span class="hljs-variable">$internet_setting</span>.ProxyServer)&quot;</span><br>    <span class="hljs-built_in">Write-Output</span> <span class="hljs-string">&quot;Proxy Enabled&quot;</span><br>&#125;<br><span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-built_in">Write-Output</span> <span class="hljs-string">&quot;Proxy Disabled&quot;</span><br>&#125;<br><br><span class="hljs-built_in">Remove-Variable</span> <span class="hljs-literal">-Name</span> internet_setting<br></code></pre></td></tr></table></figure><p>这里还遇到过一个问题，如果你是使用VisualStudioCode编辑<code>$PROFILE</code>文件，并且在<code>Write-Output</code>或<code>echo</code>指令后写入了中文，那运行时可能会报错，这是因为VSC使用的是UTF-8编码，而Powershell在中文状态下默认使用的是GBK编码，所以会出现乱码，解决方法是在VSC中将文件编码改为GBK即可。</p>]]></content>
    
    
    <categories>
      
      <category>script</category>
      
      <category>pwsh</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pwsh</tag>
      
      <tag>script</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>archlinux和manjaro从AUR安装软件时bsdtar报错问题：已解决</title>
    <link href="/2022/10/archlinux%E5%92%8Cmanjaro%E4%BB%8EAUR%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%97%B6bsdtar%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%EF%BC%9A%E5%B7%B2%E8%A7%A3%E5%86%B3/"/>
    <url>/2022/10/archlinux%E5%92%8Cmanjaro%E4%BB%8EAUR%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E6%97%B6bsdtar%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%EF%BC%9A%E5%B7%B2%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>archlinux和manjaro从AUR安装软件时bsdtar报错问题</p><span id="more"></span><p>这两天将主力机换上了Manjaro系统，本来打算上archlinux，但是被显卡驱动搞麻了（fxxk U，NVIDIA），在惊叹于AUR丰富软件源的同时也遇到了这个报错，在国内网站查询并未找到解决方案，巧合之下在archlinux论坛上找到了相关的帖子，我遇到该问题后进行的尝试和原帖楼主类似，原文链接：<a href="https://bbs.archlinux.org/viewtopic.php?pid=2061695">Index&#x2F;AUR Issues, Discussion &amp; PKGBUILD Requests&#x2F;Cannot install anything AUR with bsdtar broken</a>，有一定英语能力的可以参阅原帖。</p><h1 id="一、报错内容"><a href="#一、报错内容" class="headerlink" title="一、报错内容"></a>一、报错内容</h1><p>在使用<code>yay -S rulu-jre-fx-bin</code>命令安装<code>rulu-jre-fx-bin</code>时，<code>bsdtar</code>报错如下： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs source">bsdtar: Option --no-read-sparse is not supported<br>Usage:<br>  List:    bsdtar -tf &lt;archive-filename&gt;<br>  Extract: bsdtar -xf &lt;archive-filename&gt;<br>  Create:  bsdtar -cf &lt;archive-filename&gt; [filenames...]<br>  Help:    bsdtar --help<br></code></pre></td></tr></table></figure><p>导致软件构建失败</p><h1 id="二、猜测原因"><a href="#二、猜测原因" class="headerlink" title="二、猜测原因"></a>二、猜测原因</h1><p>既然是<code>bsdtar</code>报错，我自然就想到会不会是Manjaro使用的软件版本问题，于是我尝试对<code>tar</code>进行降级，但仍然得到相同的报错。</p><h1 id="三、解决方案"><a href="#三、解决方案" class="headerlink" title="三、解决方案"></a>三、解决方案</h1><p>解决方案由<a href="https://bbs.archlinux.org/">archlinux Form</a>用户seth给出</p><p>依次执行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs source">type tar<br>type bsdtar<br>pacman -Qi tar libarchive<br>pacman -Qo bsdtar<br>man bsdtar | grep sparse<br></code></pre></td></tr></table></figure><p>分别得到以下信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs source">&gt;type tar<br>tar is /usr/bin/tar<br>&gt;type bsdtar<br>bsdtar is /home/saymd/anaconda3/bin/bsdtar<br>&gt;pacman -Qi tar libarchive<br>名字           : tar<br>版本           : 1.34-1<br>描述           : Utility used to store, backup, and transport files<br>架构           : x86_64<br>URL            : https://www.gnu.org/software/tar/<br>软件许可       : GPL3<br>组             : 无提供           : 无依赖于         : glibc  acl  attr<br>可选依赖       : 无依赖它         : base  lib32-libltdl  libtool<br>被可选依赖     : 无与它冲突       : 无取代           : 无安装后大小     : 2.88 MiB<br>打包者         : Sébastien Luttringer &lt;seblu@seblu.net&gt;<br>编译日期       : 2021年02月13日 星期六 21时17分10秒安装日期       : 2022年08月16日 星期二 20时12分44秒安装原因       : 单独指定安装安装脚本       : 否验证者         : 数字签名<br>名字           : libarchive<br>版本           : 3.6.1-2<br>描述           : Multi-format archive and compression library<br>架构           : x86_64<br>URL            : https://libarchive.org/<br>软件许可       : BSD<br>组             : 无提供           : libarchive.so=13-64<br>依赖于         : acl  libacl.so=1-64  bzip2  expat  lz4  openssl  xz  zlib  zstd<br>可选依赖       : 无依赖它         : ark  cmake  flatpak  fwupd  mkinitcpio  mpv  ostree  pacman  pkgfile  smbclient  vlc<br>被可选依赖     : 无与它冲突       : 无取代           : 无安装后大小     : 1129.74 KiB<br>打包者         : Christian Hesse &lt;eworm@archlinux.org&gt;<br>编译日期       : 2022年08月02日 星期二 05时34分30秒安装日期       : 2022年08月16日 星期二 20时12分42秒安装原因       : 作为其他软件包的依赖关系安装安装脚本       : 否验证者         : 数字签名<br>&gt;pacman -Qo bsdtar<br>错误：没有软件包拥有 /home/saymd/anaconda3/bin/bsdtar<br></code></pre></td></tr></table></figure><p>到这里就恍然大悟，从第4行和最后一行可以看出，终端运行在conda的虚拟环境中，系统的<code>bsdtar</code>被屏蔽了，只需要完全退出虚拟环境再进行软件的安装即可成功。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs source"># 请确保完全退出虚拟环境<br>conda deactivate<br></code></pre></td></tr></table></figure><h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><p>在这个帖子中，版主V1del说了这样一段话：</p><blockquote><p>Don’t make conda the base environment of your entire shell that’s guaranteed to run you into weird issues with more than just this case here. Run conda explicitly in a terminal you dedicate to “conda” stuff, when you are actually doing conda stuff.</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>IT</category>
      
      <category>Linux</category>
      
      <category>Manjaro</category>
      
      <category>AUR</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Manjaro</tag>
      
      <tag>AUR</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu 22.04 LTS 安装 LAMP</title>
    <link href="/2022/05/Ubuntu-22-04-%E5%AE%89%E8%A3%85-LAMP/"/>
    <url>/2022/05/Ubuntu-22-04-%E5%AE%89%E8%A3%85-LAMP/</url>
    
    <content type="html"><![CDATA[<p>本文主要讲解在 Ubuntu 22.04 系统下安装 LAMP 的方法</p><span id="more"></span><h1 id="一、LAMP-简介"><a href="#一、LAMP-简介" class="headerlink" title="一、LAMP 简介"></a>一、LAMP 简介</h1><p>LAMP 指一组用于运行动态网站或服务器的自由软件名称首字母缩写:</p><ul><li>Linux，操作系统，这里使用 Ubuntu</li><li>Apache，网页服务器，这里使用 Apache2</li><li>MariaDB 或 MySQL，数据库管理系统，这里使用 MySQL</li><li>PHP、Perl或Python，脚本语言，这里使用 PHP<br>更多内容可以查阅维基百科了解 <a href="https://zh.wikipedia.org/wiki/LAMP">维基百科 LAMP</a></li></ul><h1 id="二、预先准备工作"><a href="#二、预先准备工作" class="headerlink" title="二、预先准备工作"></a>二、预先准备工作</h1><h2 id="Ubuntu-apt-更换清华源"><a href="#Ubuntu-apt-更换清华源" class="headerlink" title="Ubuntu apt 更换清华源"></a>Ubuntu apt 更换清华源</h2><p>为加快软件下载速度，这里更换为清华源</p><h3 id="备份原有的软件源"><a href="#备份原有的软件源" class="headerlink" title="备份原有的软件源"></a>备份原有的软件源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> /etc/apt/sources.list /etc/apt/sources.list.copy<br></code></pre></td></tr></table></figure><h3 id="进行编辑"><a href="#进行编辑" class="headerlink" title="进行编辑"></a>进行编辑</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/apt/sources.list<br></code></pre></td></tr></table></figure><h3 id="将对应版本的清华源写入-sources-list"><a href="#将对应版本的清华源写入-sources-list" class="headerlink" title="将对应版本的清华源写入 sources.list"></a>将对应版本的清华源写入 sources.list</h3><p>具体在清华大学开源软件镜像站中查看 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">Ubuntu 镜像使用帮助</a><br>这里使用 22.04 LTS 版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs source"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释<br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse<br># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse<br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse<br># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse<br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse<br># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse<br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse<br># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse<br><br># 预发布软件源，不建议启用<br># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse<br># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse<br></code></pre></td></tr></table></figure><h3 id="更新-apt"><a href="#更新-apt" class="headerlink" title="更新 apt"></a>更新 apt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update<br><span class="hljs-built_in">sudo</span> apt-get upgrade<br></code></pre></td></tr></table></figure><h1 id="三、安装-LAMP"><a href="#三、安装-LAMP" class="headerlink" title="三、安装 LAMP"></a>三、安装 LAMP</h1><h2 id="1、安装-Apache2"><a href="#1、安装-Apache2" class="headerlink" title="1、安装 Apache2"></a>1、安装 Apache2</h2><h3 id="使用-apt-安装-Apache2"><a href="#使用-apt-安装-Apache2" class="headerlink" title="使用 apt 安装 Apache2"></a>使用 apt 安装 Apache2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install apache2<br></code></pre></td></tr></table></figure><h3 id="检查运行状态"><a href="#检查运行状态" class="headerlink" title="检查运行状态"></a>检查运行状态</h3><p>在浏览器中打开 localhost 或 127.0.0.1 若能看到如下界面说明 Apache2 安装成功，恭喜(*￣3￣)╭  </p><img src="/2022/05/Ubuntu-22-04-%E5%AE%89%E8%A3%85-LAMP/apache2-slim.jpg" class="" title="Apache2 succeed"><h3 id="Apache2-的开启、关闭和重启"><a href="#Apache2-的开启、关闭和重启" class="headerlink" title="Apache2 的开启、关闭和重启"></a>Apache2 的开启、关闭和重启</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl start apache2<br><span class="hljs-built_in">sudo</span> systemctl stop apache2<br><span class="hljs-built_in">sudo</span> systemctl restart apache2<br></code></pre></td></tr></table></figure><hr><h2 id="2、安装-MySQL"><a href="#2、安装-MySQL" class="headerlink" title="2、安装 MySQL"></a>2、安装 MySQL</h2><h3 id="使用-apt-get-安装"><a href="#使用-apt-get-安装" class="headerlink" title="使用 apt-get 安装"></a>使用 apt-get 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install mysql-server mysql-client<br></code></pre></td></tr></table></figure><h3 id="MySQL-基础操作"><a href="#MySQL-基础操作" class="headerlink" title="MySQL 基础操作"></a>MySQL 基础操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 进入 mysql 交互</span><br>mysql<br><span class="hljs-comment"># 注：带 &quot;&gt;&quot; 的部分为在 mysql 交互界面输入的指令</span><br><span class="hljs-comment"># 创建用户</span><br>&gt; CREATE USER username@localhost<br>IDENTIFIED BY password;<br><span class="hljs-comment"># 为用户赋权</span><br>&gt; GRANT ALL ON *.* TO username@localhost;<br><span class="hljs-comment"># 创建数据库</span><br>&gt; CREATE DATABASE database_name;<br><span class="hljs-comment"># 查看已创建数据库</span><br>&gt; SHOW DATABASES;<br><br><span class="hljs-comment"># 登录用户</span><br>mysql -u username -p password<br></code></pre></td></tr></table></figure><hr><h2 id="3、安装-PHP"><a href="#3、安装-PHP" class="headerlink" title="3、安装 PHP"></a>3、安装 PHP</h2><h3 id="使用-apt-get-安装-1"><a href="#使用-apt-get-安装-1" class="headerlink" title="使用 apt-get 安装"></a>使用 apt-get 安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install php<br></code></pre></td></tr></table></figure><h3 id="查看安装结果"><a href="#查看安装结果" class="headerlink" title="查看安装结果"></a>查看安装结果</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">php -v<br></code></pre></td></tr></table></figure><p>若成功显示版本号则恭喜(*￣3￣)╭</p><h3 id="连接-PHP-与-Apache2、PHP-与-MySQL"><a href="#连接-PHP-与-Apache2、PHP-与-MySQL" class="headerlink" title="连接 PHP 与 Apache2、PHP 与 MySQL"></a>连接 PHP 与 Apache2、PHP 与 MySQL</h3><p>如果没有这一步可能会出现 Apache 无法渲染 php 而呈现出 php 源码的情况  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install libapache2-mod-php php-mysql<br></code></pre></td></tr></table></figure><hr><h2 id="4、测试环境"><a href="#4、测试环境" class="headerlink" title="4、测试环境"></a>4、测试环境</h2><h3 id="进入指定文件夹下"><a href="#进入指定文件夹下" class="headerlink" title="进入指定文件夹下"></a>进入指定文件夹下</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /var/www/html<br></code></pre></td></tr></table></figure><h3 id="创建这两个文件"><a href="#创建这两个文件" class="headerlink" title="创建这两个文件"></a>创建这两个文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> info.php<br><span class="hljs-built_in">touch</span> info.html<br></code></pre></td></tr></table></figure><h3 id="在两个文件中均写入以下内容"><a href="#在两个文件中均写入以下内容" class="headerlink" title="在两个文件中均写入以下内容"></a>在两个文件中均写入以下内容</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">phpinfo</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="打开浏览器"><a href="#打开浏览器" class="headerlink" title="打开浏览器"></a>打开浏览器</h3><p>访问 127.0.0.1&#x2F;info.php 和 127.0.0.1&#x2F;info.html<br>若均出现下图，说明 LAMP 环境搭建完成，恭喜 (*￣3￣)╭</p><img src="/2022/05/Ubuntu-22-04-%E5%AE%89%E8%A3%85-LAMP/finish-slim.jpg" class="" title="LAMP succeed"><h1 id="四、恭喜，LAMP-搭建完成"><a href="#四、恭喜，LAMP-搭建完成" class="headerlink" title="四、恭喜，LAMP 搭建完成"></a>四、恭喜，LAMP 搭建完成</h1><p>&#x3D;￣ω￣&#x3D;</p>]]></content>
    
    
    <categories>
      
      <category>IT</category>
      
      <category>Linux</category>
      
      <category>Ubuntu</category>
      
      <category>web</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
      <tag>LAMP</tag>
      
      <tag>Linux</tag>
      
      <tag>web</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/05/hello-world/"/>
    <url>/2022/05/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
